@model ws02_MVC.Models.supplierAll.supplier
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section styles{
    @* 引用input tag *@
    <link href="~/Content/Tag-Input-With-Autocomplete-jQuery-Tagator/fm.tagator.jquery.css" rel="stylesheet" />

    <style>
        body {
            font-family: 'Roboto';
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
        }

        /*#wrapper {
            padding: 15px;
            margin: 100px auto;
            max-width: 728px;
        }*/

        #activate_tagator2 {
            width: 320px;
        }
    </style>

}
<h2>修改公司資訊</h2>

<div class="container-fluid">

    <!-- DataTales Example -->
    <div class="card shadow mb-4 ">
        <div class="card-header py-2 form-inline ">
            <a href="#" class="btn btn-success">
                <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
            </a>
            &nbsp;<h3 class="m-0 font-weight-bold text-primary">修改公司資料</h3>
        </div>

        <div class="card-body">
            @*上方必填欄位 開始*@
            <form action="@Url.Action("UpdateEdit")" method="post">
                <div>
                    <div>
                        <div class="form-inline">
                            <h4 class="m-0 font-weight-bold text-primary col-5">公司資料</h4>
                            @Html.LabelFor(model => model.ThisDay, htmlAttributes: new { @class = "control-label col-md-2" })
                            @*<input id="TodayTextBox" name="ThisDay" type="text" readonly="readonly" style="border: 0px; background-color: rgba(255,255,255,0.2)" value='@DateTime.Now.ToString("yyyy-MM-dd")' />*@
                            @Html.TextBox("ThisDay", string.Format("{0:yyyy/MM/dd}", @DateTime.Now), new { @style = "border: 0px; background-color: rgba(255,255,255,0.2)", @readonly = "readonly" })
                        </div>
                        <br />
                        @* 必填欄位 *@
                        <div>
                            <div class="col-6">
                                @Html.LabelFor(model => model.supplierID, htmlAttributes: new { @class = "control-label col-md-6" })
                                <div class="form-inline">
                                    @Html.TextBoxFor(m => m.supplierID, new { @style = "border: 0px; background-color: rgba(255,255,255,0.2)", @readonly = "readonly", @class = "form-control" })&nbsp;
                                    @Html.ValidationMessageFor(m => m.supplierID, "", new { @class = "text-danger" })
                                    <span style="color:red"></span>
                                </div>
                            </div>
                            <div class="col-6">
                                @Html.LabelFor(model => model.CompanyName, htmlAttributes: new { @class = "control-label col-md-6" })
                                <div class="form-inline">
                                    @Html.TextBoxFor(m => m.CompanyName, new { @style = "border: 0px; background-color: rgba(255,255,255,0.2)", @readonly = "readonly", @class = "form-control" })&nbsp;
                                    @Html.ValidationMessageFor(m => m.CompanyName, "", new { @class = "text-danger" })
                                    <span style="color:red"></span>
                                </div>
                            </div>

                            <div class="col-12">
                                @Html.LabelFor(model => model.Address, htmlAttributes: new { @class = "control-label col-md-6" })
                                <div class="form">
                                    @Html.EditorFor(m => m.Address, new { htmlAttributes = new { @class = "form-control" } })&nbsp;
                                    @Html.ValidationMessageFor(m => m.Address, "", new { @class = "text-danger" })
                                    <span style="color:red"></span>
                                </div>
                            </div>



                            <div class="col-12">
                                @Html.LabelFor(model => model.Contact, htmlAttributes: new { @class = "control-label col-md-6" })
                                <div class="form">
                                    @Html.EditorFor(m => m.Contact, new { htmlAttributes = new { @class = "form-control" } })&nbsp;
                                    @Html.ValidationMessageFor(m => m.Contact, "", new { @class = "text-danger" })
                                    <span style="color:red"></span>
                                </div>

                            </div>

                            <div class="col-12">
                                @Html.LabelFor(model => model.DirectTelephone, htmlAttributes: new { @class = "control-label col-md-6" })
                                <div class="form">
                                    @Html.EditorFor(m => m.DirectTelephone, new { htmlAttributes = new { @class = "form-control" } })&nbsp;
                                    @Html.ValidationMessageFor(m => m.DirectTelephone, "", new { @class = "text-danger" })
                                    <span style="color:red"></span>
                                </div>

                            </div>

                            <div class="col-12">
                                @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-6" })
                                <div class="form">
                                    @Html.EditorFor(m => m.Email, new { htmlAttributes = new { @class = "form-control" } })&nbsp;
                                    @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                                    <span style="color:red"></span>
                                </div>

                            </div>
                            <div class="col-6">
                                <h6>供應元件類型:</h6>
                                <input id="activate_tagator2" dirname="Component" type="text" class="form-control form-control-user col-6 tagator" value="" name="component" data-tagator-show-all-options-on-focus="true" data-tagator-autocomplete="['CPU', 'GPU', 'SSD', 'Thermal', 'MotherBoard', 'Panel', 'MEPart','Cable','Grease','MOSFET','CHOKE','electric capacity','DDR','VRAM']">
                                <span style="color:red">*可複選</span>
                                @* 組字串回去 *@
                                <input id="Hidden1" name="ComponentHid" type="hidden" />
                                @* 組字串帶入 *@
                                <input id="Hidden2" name="ComponentHid2" type="hidden" value="@Html.DisplayFor(m=>m.strSupcom)" />
                            </div>
                        </div>
                    </div>


                    <hr />


                    <label class="col-2">
                        <a id="submit" class="btn btn-primary btn-icon-split">
                            <span class="icon text-white-50">
                                <i class="fas fa-flag"></i>
                            </span>
                            <input type="submit" class="btn btn-primary btn-icon-split" value="修改公司資訊" />
                        </a>
                    </label>


                    @*<label class="col-2">
                            <a id="submitbutton" class="btn btn-primary btn-icon-split">
                                <span class="icon text-white-50">
                                    <i class="fas fa-flag"></i>
                                </span>
                                <span class="text">送出預覽</span>
                            </a>
                        </label>*@
                    @*取消返回按鈕*@
                    <label class="col-2">
                        <a href="~/TheProject//index" id="backbutton" class="btn btn-secondary btn-icon-split">
                            <span class="icon text-white-50">
                                <i class="fas fa-arrow-right"></i>
                            </span>
                            <span class="text">回首頁</span>
                        </a>
                    </label>
                </div>
            </form>
        </div>


    </div>
</div>
@section scripts{
    @* 引用input tag js *@
    <script src="~/Content/Tag-Input-With-Autocomplete-jQuery-Tagator/fm.tagator.jquery.js"></script>
    <script>
        $(function () {



            //引用的原件
            var $input_tagator1 = $('#input_tagator1');
            var $activate_tagator1 = $('#activate_tagator1');
            $activate_tagator1.click(function () {
                if ($input_tagator1.data('tagator') === undefined) {
                    $input_tagator1.tagator({
                        autocomplete: ['first', 'second', 'third', 'fourth', 'fifth', 'sixth', 'seventh', 'eighth', 'ninth', 'tenth'],
                        useDimmer: true
                    });
                    $activate_tagator1.val('destroy tagator');
                } else {
                    $input_tagator1.tagator('destroy');
                    $activate_tagator1.val('activate tagator');
                }
            });
            $activate_tagator1.trigger('click');
        });

        //取隱藏欄位2填入元件value
        var str = $("#Hidden2").val();
        $("#activate_tagator2").val(str);
        //計算元件選擇的值組字串
        $("#submit").click(function () {
            var thevalue = "";
            $(".tagator_tag").each(function () {
                var thetext = $(this).text().slice(0, -1);
                console.log(thetext);
                thevalue += thetext + ',';
            });
            console.log(thevalue)
            $("#Hidden1").val(thevalue)

        });
        $("#submitbutton").click(function () {
            var thevalue = "";
            $(".tagator_tag").each(function () {
                var thetext = $(this).text().slice(0, -1);
                console.log(thetext);
                thevalue += thetext + ',';
            });
            console.log(thevalue)
            $("#Hidden1").val(thevalue)
        });
    </script>

}
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
